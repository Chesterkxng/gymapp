{% extends 'base.html' %} {% block content %}
<h5 class="mb-0"><strong>ABONNEMENTS</strong></h5>
<span class="text-secondary"
  >Abonnements <i class="fa fa-angle-right"></i> Liste</span
>

<div class="row mt-3">
  <div class="col-sm-12">
    <!--Datatable-->
    <div class="mt-1 mb-3 p-3 button-container bg-white border shadow-sm">
      <h6 class="mb-2">Datatable</h6>

      <div class="table-responsive">
        <table id="example" class="table table-striped table-bordered">
          <thead>
            <tr>
              <th>NOM</th>
              <th>PRENOMS</th>
              <th>EMAIL</th>
              <th>TELEPHONE</th>
              <th>DATE DE DEBUT</th>
              <th>DATE DE FIN</th>
              <th>STATUS</th>
              <th>ACTIONS</th>
            </tr>
          </thead>
          <tbody>
            {% for subscription in subscriptions %}
            <tr>
              <td>{{ subscription.surname }}</td>
              <td>{{ subscription.name }}</td>
              <td>{{ subscription.email }}</td>
              <td>{{ subscription.phone }}</td>
              <td>{{ subscription.startDate|date:'d-m-Y' }}</td>
              <td>{{ subscription.endDate|date:'d-m-Y' }}</td>
              {% if subscription.status %}
              <td>
                <span class="badge badge-success badge-pill">EN COURS</span>
              </td>
              {% else %}
              <td>
                <span class="badge badge-danger badge-pill"> EXPIRE </span>
              </td>
              {% endif %}
              <td>
                <div class="d-flex justify-content-around">
                  <!--Check if the subscription have been expired for showing reconduction button-->
                  {% if not subscription.status %}
                  <form method="post" action="{% url 'reconductSubscription' %}"
                    > {% csrf_token %}
                    <input type="hidden" name="id" id="id" value="{{subscription.id}}">
                    <button type="submit" class="btn btn-secondary">
                      <i class="fa fa-arrow-right"></i></button
                  ></form>
                  {% endif %}
                  <!-- END CHECK-->
                  <form method="post" action="{% url 'updateSubscription' %}"
                    >{% csrf_token %}
                    <input type="hidden" name="id" id="id" value="{{subscription.id}}">
                    <button type="submit" class="btn btn-info">
                      <i class="fa fa-pencil"></i></button
                  ></form>
                  <form method="post" action="{% url 'deleteSubscription' %}"
                    >{% csrf_token %}
                    <input type="hidden" name="id" id="id" value="{{subscription.id}}">
                    <button type="submit" class="btn btn-danger">
                      <i class="fa fa-trash"></i></button
                  ></form>
                </div>
              </td>
            </tr>
            {% endfor %}
          </tbody>
          <tfoot>
            <tr>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th>
                <a href="{% url 'addSubscription' %}"
                  ><button type="button" class="btn btn-primary btn-block">
                    <i class="fa fa-plus"></i></button
                ></a>
              </th>
            </tr>
            <tr>
              <th>NOM</th>
              <th>PRENOMS</th>
              <th>EMAIL</th>
              <th>TELEPHONE</th>
              <th>DATE DE DEBUT</th>
              <th>DATE DE FIN</th>
              <th>STATUS</th>
              <th>ACTIONS</th>
            </tr>
          </tfoot>
        </table>
      </div>
    </div>
    <!--/Datatable-->
  </div>
</div>
{% endblock %}
